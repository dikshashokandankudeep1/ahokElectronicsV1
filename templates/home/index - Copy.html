{% load static %}
<!DOCTYPE html>
<html>
<title>Ashok Electronics</title>
<!--  References
    https://www.w3schools.com/css/css_rwd_intro.asp
    https://www.w3schools.com/css/css_rwd_templates.asp
    https://www.w3schools.com/w3css/w3css_icons.asp
-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/common/universal/w3.css' %}">
    <link rel="stylesheet" href="{% static 'css/common/universal/fontawesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/common/universal/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/searchItems.css' %}">
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <script src="{% static 'js/common/universal/all.js' %}"></script>
</head>

<body style="position: relative;">
    {% include 'common/header/header.html' %}
    <div class="w3-content" style="max-width:1200px; margin-top: 5.5%;" onmouseover="dropdownMenuProfileHide()">
        <div class="w3-main" style="margin-left:100px; margin-right:100px;">
            <!-- Image header -->
            <div class="w3-display-container w3-container">
                <div class="slideshow-container">
                    {% for instance in productHomeSliderObj %}
                    <div class="mySlides fade">
                        <img src="{{ instance.image.url }}" style="width:100%">
                    </div>
                    {% endfor %}
                    <br>
                    <div style="text-align:center;">
                        {% for instance in productHomeSliderObjCountList %}
                            <span class="dot"></span> 
                        {% endfor %}
                    </div>
                </div>
                <!--
                    <img src="images/jeans.jpg" alt="Jeans" style="width:100%">
                    <div class="w3-display-topleft w3-text-white" style="padding:24px 48px">
                    <h1 class="w3-jumbo w3-hide-small">New arrivals</h1>
                    <h1 class="w3-hide-large w3-hide-medium">New arrivals</h1>
                    <h1 class="w3-hide-small">COLLECTION 2016</h1>
                    <p><a href="#jeans" class="w3-button w3-black w3-padding-large w3-large">SHOP NOW</a></p>
                </div>
                -->
            </div>
            <!-- Number of Products -->
            <!--<div class="w3-container w3-text-grey" id="jeans">
                <p>{{ productHomeCategoryListObjCount }} items</p>
            </div>-->

            <div class="w3-row w3-grayscale" style="padding-top: 5%;">
                {% for instance in productHomeCategoryListObj %}
                <div class="w3-col l3 m4 s6">
                    <div class="w3-container">
                        <a href="product-category/{{ instance.category }}">
                            <img src="{{ instance.image.url }}" class="homeCategoryListId">
                        </a>
                        <center>
                            <h4><b>{{ instance.category }}</b></h4>
                        </center>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
</body>

<script>
    function toCommaSeperatedCurrency(currency, flag="float"){
        let finalOutput = ""
        let currencySplit = currency.split(".")
        if(currencySplit[0].length <= 3){
            if (flag == "float"){
                if(currencySplit.length == 2){
                    return currency;
                }
                else{
                    return (currency + ".00")
                }
            }
            else{
                return (currencySplit[0] + ".00")
            }
        }
        else{
            let internalOutput = checkThreeDigit(currency);
            if(finalOutput == ""){
                finalOutput = internalOutput
            }
            else{
                finalOutput = finalOutput + "," + internalOutput
            }
            
            if (flag == "float"){
                if(currencySplit.length == 2){
                    return (finalOutput + "." + currencySplit[1]);
                }
                else{
                    return (finalOutput + ".00")
                }
            }
            else{
                return finalOutput;
            }
        }
        function checkThreeDigit(currency){
            let frontIntData = parseInt(currency.split(".")[0])
            if( frontIntData > 999 ){
                let innerStrSplit = ((frontIntData / 1000).toString()).split(".")
                let internalOutput =  checkThreeDigit(innerStrSplit[0].toString());
                if(finalOutput == ""){
                    finalOutput = internalOutput
                }
                else{
                    finalOutput = finalOutput + "," + internalOutput
                }
                return innerStrSplit[1];
            }
            else{
                if(parseInt(currency) > 99){
                    let splitData = ((parseInt(currency) / 100).toString()).split(".");
                    let output = splitData[0] + "," + splitData[1];
                    return output;
                }
                else{
                    return currency;
                }
            }
        }
    }

    function commaSeperatedCurrencyToFloatOrInt(currency, flg="float"){
        let finalStr = ""
        for (var i = 0; i < currency.length; i++) {
            if(currency[i] != ','){
                if((currency[i] == '.') && (flg != "float")){
                    break;
                }
                finalStr = finalStr + currency[i];
            }
        }
        return finalStr;
    }

    function testDemo1(){
        let currency = "9986386839.0877";
        let output = toCommaSeperatedCurrency(currency, "float")
        console.log("Input::", currency);
        console.log("Output::", output);
    }

    function testDemo2(){
        let currency = "5,89.0877";
        let output = commaSeperatedCurrencyToFloatOrInt(currency, "float")
        console.log("Input::", currency);
        console.log("Output::", output);
    }

    window.onload = function() {
        document.getElementById("dropdownMenuProfile").style.display = "none";
        testDemo1();
        testDemo2();
    };

    function dropdownMenuProfileHide(){
        document.getElementById("dropdownMenuProfile").style.display = "none";
    }
    
    var slideIndex = 0;
    showSlides();

    function showSlides() {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");

        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {
            slideIndex = 1
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].className += "active";
        setTimeout(showSlides, 3000); // Change image every 2 seconds
    }
</script>

</html>
